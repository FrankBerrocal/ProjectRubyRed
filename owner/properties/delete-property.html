<!--
Name: Final Project
Course Code: SODV1201
Program: Software Development Diploma
Authors:
Colin From
Pedro Ferreira
Peter Kosa
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Delete Property</title>
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body onload="checkProperties()">
    <nav>
        <ul class="navigation">
            <!-- no href needed since it's working hiding/showing divs. -->
            <li><a href="/owner/properties" id="" onclick="">Home</a></li>
            <li><a href="create" id="" onclick="">Create</a></li>
            <li><a href="update" id="" onclick="">Update</a></li>
            <li><a href="delete" id="" onclick="">Delete</a></li>
        </ul>
    </nav>

    <div class="mainPage">
        <div id="profilePage">

            <h1>Delete Property</h1>
            <form action="http://localhost:1007/owner/properties/property-deleted" method="POST">
                <label for="name">Select property:</label>
                <select name="name" id="name">
                </select><br><br>

                <label for="deletecheck">Are you sure you want to delete this property?</label>
                <input type="checkbox" id="deletecheck" name="deletecheck" value="positive" required><br><br>

                <input type="submit" value="Delete">
            </form>

        </div>
    </div>

    <div class="bottomBar">
        Webpage by Colin From, Pedro Ferreira and Peter Kosa, for SODV1201 - Final Project.
        Copyright
        2022.
    </div>

    <script>
        const select = document.getElementById('name');

        function checkProperties() {
            fetch('/currentUser')
                .then(res => res.json())
                .then(function (data) {
                    data.properties.forEach(element => {
                        var option = document.createElement('option');
                        option.value = element.name;
                        option.textContent = element.name;
                        select.appendChild(option);
                    })
                }
                )
                .catch(err => alert("I got an error on the API."))
        }
    </script>
</body>

</html>