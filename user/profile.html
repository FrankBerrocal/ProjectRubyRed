<!--
Name: Final Project
Course Code: SODV1201
Program: Software Development Diploma
Authors:
Colin From
Frank Berrocal
Pedro Ferreira
Peter Kosa
-->

<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Coworking Registry</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>

<body>
  <nav>
    <ul class="navigation">
      <li><a href="/user/home">Home</a></li>
      <li><a href="/user/profile">Profile</a></li>
      <li><a href="/user/rentals">My Rentals</a></li>
      <li><a href="/logout">Logout</a></li>
    </ul>
  </nav>

  <div class="mainPage">
    <div id="profilePage">
      <h1>Profile Page</h1>

      <form action='/updateUser' method="POST">
        <table style="width: auto; margin: auto;">
          <tr>
            <td><label for="fName">First Name: </label></td>
            <td><input type="text" name="fName" id="fName" placeholder="John" required></td>
          </tr>

          <tr>
            <td><label for="lName">Last Name: </label></td>
            <td><input type="text" name="lName" id="lName" placeholder="Doe" required></td>
          </tr>

          <tr>
            <td><label for="idNumber">ID Number: </label></td>
            <td><input type="text" name="idNumber" id="idNumber" placeholder="5555" required></td>
          </tr>

          <tr>
            <td><label for="phoneNumber">Phone Number: </label></td>
            <td><input type="tel" name="phoneNumber" id="phoneNumber" placeholder="555 555 5555"
                pattern="[0-9]{3} [0-9]{3} [0-9]{4}" required></td>
          </tr>

          <tr>
            <td><label for="email">Email Address: </label></td>
            <td><input type="email" name="email" id="email" placeholder="JD@email.com" required></td>
          </tr>

          <tr>
            <td><label for="password">Password: </label></td>
            <td><input type="password" name="password" id="password" placeholder="Password" required></td>
          </tr>
        </table>

        <input type="submit" value="Update" style="display: block; margin: 2.5vh auto;">
      </form>

      <form action='/deleteUser' method="POST">
        <input type="submit" value="Delete" style="display: block; margin: 2.5vh auto;">
      </form>
    </div>
  </div>

  <div class="bottomBar">
    Webpage by Colin From, Frank Berrocal, Pedro Ferreira and Peter Kosa, for SODV1201 - Final Project. Copyright 2022.
  </div>

  <script>
    //Fetch the current user info
    fetch('/currentUser')
        .then(res => res.json()) //Get json format of the body
        .then(function(data){ //Update the dom elements with the proper info obtained from the fetch
            document.getElementById('fName').value = data.fName;
            document.getElementById('lName').value = data.lName;
            document.getElementById('idNumber').value = data.idNumber;
            document.getElementById('phoneNumber').value = data.phoneNumber;
            document.getElementById('email').value = data.email;
            document.getElementById('password').value = data.password;
        })
        .catch(err => console.error(err)); //For errors
  </script>
</body>
</html>
